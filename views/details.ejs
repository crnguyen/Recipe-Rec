
<!-- When you click on a reciple title, render results here -->
<div class="mainDetails">
<div class="detailsPage">
  <% if (details) { %>
    <div class="titleAndImage" style="text-align:center">
          <h4 class="favoritesTitles"><%= details.title %></h4>
          <hr />
          <img src="<%= details.image %>" style="width:300px" alt="image">
    </div>
    <div class="details">
          <p><strong>Cuisine Type:</strong> 
            <%= details.cuisines %></p>
          <p><strong>Preparation and Cooking Time:</strong> <%= details.readyInMinutes %> minutes </p>
           <!-- INGREDIENT WIDGET-->
          <pre id="spoonacular-ingredients" style="display:none">
            <% details.nutrition.ingredients.forEach(d=>{ %>
              <%=d.amount%> <%=d.unit%> of <%= d.name %>
            <% }) %> 
            </pre>
            <div id="spoonacular-ingredient-visualizer"></div>
            <script type="text/javascript" class="widget">
             var spoonacularServings = `${details.servings}` ;
             var spoonacularMeasure = 'us';
             var spoonacularView = 'grid';
            </script>
            <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
            <script type="text/javascript" src="https://spoonacular.com/cdn/spoonacular-1.6.min.js"></script>
          <br>

          <p><strong>Vegetarian? </strong> 
          <% if (details.vegetarian === false) { %>
            NO
          <% } else { %>
            YES
          <% } %> </p>

          <p><strong>Gluten Free? </strong>
            <% if (details.glutenFree === false) { %>
              NO
            <% } else { %>
              YES
            <% } %> </p>

            <p><strong>Dairy Free? </strong>
              <% if (details.dairyFree === false) { %>
                NO
              <% } else { %>
                YES
              <% } %> </p>

          
          <p><strong>Instructions:</strong> 
            <% if (details.instructions === null) { %>
              Instructions cannot be provided at this time. Please click on Complete Recipes and Details link below.
            <% } else { %> 
            <p><%- details.instructions %> </p>
            <% } %>

          <p><strong>For more information, check out this page:</strong> <a class="a" href="<%= details.sourceUrl %>">Complete Recipe and Details</a> </p>   
  <% } else { %> 
      <p>No recipe information available</p>
  <% } %>
  </div>

  <!-- this section is breaking my page-->
  <!-- display user comments on details page-->

  <hr />
  <h4>Comments</h4>
  <div class="commentsDiv">
  <% if(comments.length > 0) { %> 
  <% comments.forEach(comment => { %>
  <div class="well">
    <p>
      <%= comment.user.name %> 
      <br>
      <br>
      <%= comment.content %>
    </p>
  </div>
  <% }) %> <% } else { %> <!-- if there are no comments display below-->
  <h3>No comments yet! Add some! </h3>
  <% } %>
<!-- form to add a comment-->
<div>
  <h5>Add a Comment:</h5>
  <form method="POST" action="/comments">
    <input type="hidden" name="recipeId" value="<%= details.id %>" />
    <input hidden value="<%= user.id %>" type="text" id="userId" name="userId" required />
    <label for="comment">Comment</label>
    <input type="text" id="content" name="content" required />
    <input type="submit" />
  </form>
</div>
<br />
</div>

<br>
<a href="/recipes">&larr; Back To Recipes</a>
</div>

</div>

